# Извещение о поставке

import pytest
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.by import By
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.support import WebDriverWait
import time

def authentication(auth):
    driver = webdriver.Chrome(executable_path = "C:\\Users\Владимир\PycharmProjects\Selenium\drivers\chromedriver.exe")
    driver.get("https://test.factoring.ru/")
    driver.maximize_windows()
    search_login = auth.find_element_by_id('userNameInput')
    search_password = auth.find_elements_by_id('passwordInput')
    search_button = auth.find_element_by_class_name('button')
    search_login.send_keys("ewq123")
    search_password.send_keys("qwe123")
    search_button.click()  # Жмем на кнопку Войти

def add_document(doc):
        section_documents = doc.find_element_by_xpath('.//a[@href="#/documents/new"]//span[@class="ef-shell-nav-group__title"]') # or (//span[text()='Документы'])[2]
        section_documents.click() # Переход в раздел Документы
        section_drafts = doc.find_element_by_xpath('.//a[@href="#/documents/new"]//span[@class="ef-shell-nav-group__item-title"]') # or (//a[@href='#/documents/new']//span)[2]
        section_drafts.click() # Переход в раздел Черновики

    def create_document():
        search_button_add = driver.find_element_by_xpath('.//div[@class ="ef-toolbar__content"]//button[@ color="primary"]') #  или //button[text()=' Добавить ']
        search_button_add.click()  # Клик на кнопку Добавить
        delivery_notice = driver.find_element_by_xpath('//*[@id="cdk-overlay-6"]/ef-select-dialog/ef-scroll-box/div/ef-panel[2]/div[2]/ef-list-item[1]/a/div[1]')  # or (//div[@class='ef-list-item__title'])[2]
        delivery_notice.click()  # Выбрали Извещение о поставке

    def create_delivery_notice():
        customer = driver.find_element_by_xpath ('(//label[text()='Покупатель']/following::input)[1]')
        customer.click() #Клик на поле Покупатель
        enter_text = driver.find_element_by_xpath('//input[contains(@class,'form-control ng-pristine')]')
        enter_text.send_keys('Юань')
        add_company = driver.find_elements_by_class_name
        add_company.click() #Выбор компании
        add_number_document = driver.find_elements_by_id('numberInput')
        add_number_document.send_keys('324621265618800') #Добавление номера
        calendar = driver.find_element_by_xpath('//input[contains(@class,'ef-date-picker__input form-control')]')
        calendar.click()
        select_day = driver.find_element_by_xpath('//button[contains(@class,'ef-calendar__week-day ef-calendar__week-day--selected')]')
        select_day.click() #Выбор даты
        add_sum = driver.find_element_by_xpath('amount')
        add_sum.send_keys('15000000')
        # choice_currency = driver.find_element_by_xpath('(//input[contains(@class,'form-control ef-entity-picker__input')])[3]')
        # choice_currency.click()
        add_invoice_number = driver.find_elements_by_id('tw-source-text-ta')
        add_invoice_number.send_keys('5432333211524426/ДЕВ-78')
        add_account_number = driver.find_elements_by_id('billNumberInput')
        add_account_number.send_keys('70401810121234567890')
        add_comment = driver.find_elements_by_id('commentInput')
        add_comment.send_keys('123`Ё!"№;%:?*()_+=-*\^&^$#/')

